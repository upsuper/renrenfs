# 人人网 FS

依照 UNIX 一切皆文件的哲学思想，基于 FUSE (Filesystem in Userspace)，将人人网的数据映射为一个文件系统。

这个程序还很粗糙，其实也只是我一时心血来潮写的一个小程序，如果你有兴趣的话也可以一起来改进它~

## 使用方式

首先你需要到人人网的开放平台上申请一个新的桌面应用，因为这个应用没有提交申请，所以其他人是用不了里面写的 API Key 和 Secret Key 的。

然后需要安装 FUSE。Mac OS X 下安装的是 [OSXFUSE](http://osxfuse.github.com/)。Linux 下不同的发行版安装方式不太一样，通用的方法可以参看 FUSE 的[官方网站](http://fuse.sourceforge.net/)。

安装好 FUSE 后下载本程序，将 config.sample.py 复制为 config.py，并将你申请的 API Key 和 Secret Key 填到 config.py 中的对应位置。

接下去呢，随便在某个地方如 Mac OS X 下的 /Volumns 或者 Linux 下的 /mnt 里面新建一个文件夹作为挂载点，如 /Volumns/Renren，然后在本程序所在的目录下运行

    ./renren.py /Volumns/Renren

即可。

接下来，程序会打印出一个网址，你需要将这个网址复制到浏览器中，回车进入，即会进入人人网的验证画面。通过后，网址呈现如

    http://graph.renren.com/oauth/login_success.html
    #access_token=123456|0.abcdefghijklmnopqrstuvwxyz012345.6789012.3456789012-345678901
    &expires_in=2593851&scope=read_user_blog+read_user_album+read_user_photo

的形式，将 access\_token 等号后面到 & 为止的部分复制下来，粘贴到命令行中的 `Access Token:` 后面，回车继续。

如果你看到刷屏式的出现很多信息，那应该说明已经成功挂载了人人网 FS，你可以进入你挂载的路径进行查看。

## 设想但尚未实现的功能

* 日志访问

    最初设想中主要就是日志和相册的访问可以通过文件的形式进行。日志显示为一个 HTML 文件，可以直接从文件系统中打开浏览。
    
    但是实现的过程中，由于人人网对 API 访问频率的限制，日志暂时还没有好的实现方法。

* 新建相册、上传照片

    最初设想中允许用户在自己的照片文件夹中新建文件夹，并将此操作映射到新建相册的操作。还设想通过拖动照片文件到相册内，直接实现上传照片。

    这个部分只是纯粹因为懒所以还没实现而已……

* 发布日志

    与上传照片相似，设想中还有通过这个发布日志。将写好的日志文件，无论是 HTML 的还是 DOC 或者 TXT 格式的，复制到自己的日子文件夹里就可以实现发布日志的操作。

* 显示用户头像、相册封面

    对于用户文件夹，将用户头像显示为其图标，而对于相册文件夹将相册封面显示为其图标。

    这需要 Mac OS X 的 Resource Fork 这一功能，由于还没有研究清楚实现方法，所以没有实现。

## 已知局限性

* 可能显示不完全

    出于偷懒的考虑，对于所有需要分页获取的信息全部没有设计多次获取，仅仅是将每页数量放在一个较大的数值上以尽量抓取多的数据。比如只会显示1000个相册，每个相册只会显示200张相片等。

* 代码缺乏注释和文档

    程序员最讨厌的两件事情你懂的。

* 没有易用的界面

    由于目前还是非常粗糙的状态，因此也就没有做任何界面性质的东西。

## 主要限制

* 人人网 API 访问频率限制

    人人网的 API 对于普通应用限制访问频率为每小时150次查询。这对于实现文件系统映射的很多功能都是不够的。即使缓存信息，对于部分项目比如日志的访问等，仍然可能产生突发大访问量。
